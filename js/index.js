"use strict";class Slider{constructor(t){this.detecting=!1,this.started=!1,this.slider=t,this.leftSlides=t.getElementsByClassName("slider__slide--left"),this.rightSlides=t.getElementsByClassName("slider__slide--right"),this.centralSlides=t.getElementsByClassName("slider__slide--central"),this.slides=t.getElementsByClassName("slider__slide");for(let t=0;t<this.slides.length;t++)this.slides[t].dataset.slide=t+1,0!==t?this.slides[t].classList.add("slider__slide--right"):this.slides[t].classList.add("slider__slide--central");this.slider.addEventListener("touchstart",t=>this.touchStart(t)),this.slider.addEventListener("touchmove",t=>this.touchMove(t)),this.slider.addEventListener("touchend",t=>this.touchEnd(t)),this.slider.addEventListener("touchcancel",t=>this.touchEnd(t)),this.sliderControls=t.getElementsByClassName("slider__control"),this.sliderControls[0].classList.add("slider__control--active"),this.activeSliderControls=t.getElementsByClassName("slider__control--active");for(let t=0;t<this.sliderControls.length;t++)this.sliderControls[t].dataset.slide=t+1,0===t&&this.sliderControls[t].classList.add("slider__control--active"),this.sliderControls[t].onclick=(t=>this.onControlClick(t))}get leftSlide(){return this.leftSlides[this.leftSlides.length-1]}get rightSlide(){return this.rightSlides[0]}get centralSlide(){return this.centralSlides[0]}get activeSliderControl(){return this.activeSliderControls[0]}onControlClick(t){const e=t.target.dataset.slide,s=this.slides[e-1];if(this.centralSlide.dataset.slide===s.dataset.slide)return;const i=this.centralSlide.dataset.slide-1;this.swipe(s);const l=this.centralSlide.dataset.slide-1;if(Math.abs(l-i)<=1)return;let a,d,n,r;l>i?(a=i+1,d=l-1,n="left",r="right"):(a=l+1,d=i-1,n="right",r="left");for(let t=a;t<=d;t++)this.slides[t].classList.remove(`slider__slide--${r}`),this.slides[t].classList.add(`slider__slide--${n}`)}touchStart(t){1!=t.touches.length||this.started||(this.detecting=!0,this.touch=t.changedTouches[0],this.x=this.touch.clientX,this.y=this.touch.clientY)}touchMove(t){(this.started||this.detecting)&&(this.detecting&&this.detect(t),this.started&&this.draw(t))}detect(t){let e=t.changedTouches.item(this.touch.identifier);e&&(Math.abs(this.x-e.clientX)>=Math.abs(this.y-e.clientY)&&(t.preventDefault(),this.started=!0),this.detecting=!1)}draw(t){t.preventDefault();let e=t.changedTouches.item(this.touch.identifier);e&&(this.delta=this.x-e.clientX,(this.delta>0&&!this.rightSlide||this.delta<0&&!this.leftSlide)&&(this.delta=this.delta/5),this.moveTo(this.delta))}moveTo(t){this.centralSlide.style.transform=`translateX(${-t}px)`;let e=t<0?this.leftSlide:this.rightSlide;e&&(e.style.transform=t<0?`translateX(calc(-100% + ${Math.abs(t)}px))`:`translateX(calc(100% - ${Math.abs(t)}px))`)}touchEnd(t){if(!t.changedTouches.item(this.touch.identifier)||!this.started)return;t.preventDefault();const e=this.delta<0?this.leftSlide:this.rightSlide;this.swipe(e),this.started=!1}swipe(t){const e=this.centralSlide;if(this.prepareAnimation(t),!t)return;this.activateControl(+t.dataset.slide);const s=+e.dataset.slide>+t.dataset.slide?"right":"left",i=+e.dataset.slide<+t.dataset.slide?"right":"left";e.classList.remove("slider__slide--central"),e.classList.add(`slider__slide--${s}`),t.classList.remove(`slider__slide--${i}`),t.classList.add("slider__slide--central")}prepareAnimation(t){const e=this.centralSlide;e.classList.add("slider__slide--animating"),e.addEventListener("transitionend",t=>t.target.classList.remove("slider__slide--animating")),e.removeAttribute("style"),t&&(t.classList.add("slider__slide--animating"),t.addEventListener("transitionend",t=>t.target.classList.remove("slider__slide--animating")),t.removeAttribute("style"))}activateControl(t){this.activeSliderControl.classList.remove("slider__control--active"),this.sliderControls[t-1].classList.add("slider__control--active")}}const sliderElem=document.getElementById("js-slider"),slider=new Slider(sliderElem),menuButton=document.getElementById("js-main-nav__menu-toggle"),mainNav=document.getElementById("js-main-nav"),mainNavList=mainNav.querySelector("ul.main-nav__list");menuButton.onclick=(t=>{menuButton.classList.toggle("main-nav__menu-toggle--opened"),mainNav.classList.contains("main-nav--opened")?TweenLite.fromTo(mainNavList,.3,{yPercent:0},{yPercent:-100,onComplete:()=>mainNav.classList.remove("main-nav--opened"),clearProps:"all"}):TweenLite.fromTo(mainNavList,.3,{yPercent:-100},{yPercent:0,onStart:()=>mainNav.classList.add("main-nav--opened"),clearProps:"all"})});