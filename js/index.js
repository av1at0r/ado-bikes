"use strict";var _createClass=function(){function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Slider=function(){function l(t){var e=this;_classCallCheck(this,l),this.detecting=!1,this.started=!1,this.slider=t,this.leftSlides=t.getElementsByClassName("slider__slide--left"),this.rightSlides=t.getElementsByClassName("slider__slide--right"),this.centralSlides=t.getElementsByClassName("slider__slide--central"),this.slides=t.getElementsByClassName("slider__slide");for(var i=0;i<this.slides.length;i++)this.slides[i].dataset.slide=i+1,0!==i?this.slides[i].classList.add("slider__slide--right"):this.slides[i].classList.add("slider__slide--central");this.slider.addEventListener("touchstart",function(t){return e.touchStart(t)}),this.slider.addEventListener("touchmove",function(t){return e.touchMove(t)}),this.slider.addEventListener("touchend",function(t){return e.touchEnd(t)}),this.slider.addEventListener("touchcancel",function(t){return e.touchEnd(t)}),this.sliderControls=t.getElementsByClassName("slider__control"),this.sliderControls[0].classList.add("slider__control--active"),this.activeSliderControls=t.getElementsByClassName("slider__control--active");for(var s=0;s<this.sliderControls.length;s++)this.sliderControls[s].dataset.slide=s+1,0===s&&this.sliderControls[s].classList.add("slider__control--active"),this.sliderControls[s].onclick=function(t){return e.onControlClick(t)}}return _createClass(l,[{key:"onControlClick",value:function(t){var e=t.target.dataset.slide,i=this.slides[e-1];if(this.centralSlide.dataset.slide!==i.dataset.slide){var s=this.centralSlide.dataset.slide-1;this.swipe(i);var l=this.centralSlide.dataset.slide-1;if(!(Math.abs(l-s)<=1)){var a=void 0,n=void 0,r=void 0,d=void 0;s<l?(a=s+1,n=l-1,r="left",d="right"):(a=l+1,n=s-1,r="right",d="left");for(var o=a;o<=n;o++)this.slides[o].classList.remove("slider__slide--"+d),this.slides[o].classList.add("slider__slide--"+r)}}}},{key:"touchStart",value:function(t){1!=t.touches.length||this.started||(this.detecting=!0,this.touch=t.changedTouches[0],this.x=this.touch.clientX,this.y=this.touch.clientY)}},{key:"touchMove",value:function(t){(this.started||this.detecting)&&(this.detecting&&this.detect(t),this.started&&this.draw(t))}},{key:"detect",value:function(t){var e=t.changedTouches.item(this.touch.identifier);e&&(Math.abs(this.x-e.clientX)>=Math.abs(this.y-e.clientY)&&(t.preventDefault(),this.started=!0),this.detecting=!1)}},{key:"draw",value:function(t){t.preventDefault();var e=t.changedTouches.item(this.touch.identifier);e&&(this.delta=this.x-e.clientX,(0<this.delta&&!this.rightSlide||this.delta<0&&!this.leftSlide)&&(this.delta=this.delta/5),this.moveTo(this.delta))}},{key:"moveTo",value:function(t){this.centralSlide.style.transform="translateX("+-t+"px)";var e=t<0?this.leftSlide:this.rightSlide;e&&(e.style.transform=t<0?"translateX(calc(-100% + "+Math.abs(t)+"px))":"translateX(calc(100% - "+Math.abs(t)+"px))")}},{key:"touchEnd",value:function(t){if(t.changedTouches.item(this.touch.identifier)&&this.started){t.preventDefault();var e=this.delta<0?this.leftSlide:this.rightSlide;this.swipe(e),this.started=!1}}},{key:"swipe",value:function(t){var e=this.centralSlide;if(this.prepareAnimation(t),t){this.activateControl(+t.dataset.slide);var i=+e.dataset.slide>+t.dataset.slide?"right":"left",s=+e.dataset.slide<+t.dataset.slide?"right":"left";e.classList.remove("slider__slide--central"),e.classList.add("slider__slide--"+i),t.classList.remove("slider__slide--"+s),t.classList.add("slider__slide--central")}}},{key:"prepareAnimation",value:function(t){var e=this.centralSlide;e.classList.add("slider__slide--animating"),e.addEventListener("transitionend",function(t){return t.target.classList.remove("slider__slide--animating")}),e.removeAttribute("style"),t&&(t.classList.add("slider__slide--animating"),t.addEventListener("transitionend",function(t){return t.target.classList.remove("slider__slide--animating")}),t.removeAttribute("style"))}},{key:"activateControl",value:function(t){this.activeSliderControl.classList.remove("slider__control--active"),this.sliderControls[t-1].classList.add("slider__control--active")}},{key:"leftSlide",get:function(){return this.leftSlides[this.leftSlides.length-1]}},{key:"rightSlide",get:function(){return this.rightSlides[0]}},{key:"centralSlide",get:function(){return this.centralSlides[0]}},{key:"activeSliderControl",get:function(){return this.activeSliderControls[0]}}]),l}(),sliderElem=document.getElementById("js-slider"),slider=new Slider(sliderElem),menuButton=document.getElementById("js-main-nav__menu-toggle"),mainNav=document.getElementById("js-main-nav"),mainNavList=mainNav.querySelector("ul.main-nav__list");menuButton.onclick=function(t){menuButton.classList.toggle("main-nav__menu-toggle--opened"),mainNav.classList.contains("main-nav--opened")?TweenLite.fromTo(mainNavList,.3,{yPercent:0},{yPercent:-100,onComplete:function(){return mainNav.classList.remove("main-nav--opened")},clearProps:"all"}):TweenLite.fromTo(mainNavList,.3,{yPercent:-100},{yPercent:0,onStart:function(){return mainNav.classList.add("main-nav--opened")},clearProps:"all"})};